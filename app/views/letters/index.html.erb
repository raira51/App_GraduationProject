<div class="max-w-4xl mx-auto px-4 py-8">
  <div class="mb-6">
    <%= link_to edit_celebration_path(@celebration),
          class: "inline-flex items-center gap-2 text-sm text-stone-500 hover:text-stone-700" do %>
      <span>←</span>
      <span>編集画面に戻る</span>
    <% end %>
  </div>

  <div class="flex items-center justify-between">
    <h1 class="text-xl font-semibold text-stone-800">届いた手紙一覧</h1>
    <p class="text-sm text-stone-500"><%= @letters.count %> 通</p>
  </div>

  <% if @letters.any? %>
    <div class="mt-6 space-y-3">
      <% @letters.each do |letter| %>
        <div class="rounded-2xl border border-stone-200 bg-white p-5 shadow-sm">
          <div class="flex items-start justify-between gap-4">
            <div class="min-w-0">
              <p class="text-sm font-semibold px-3 py-3 text-stone-800 truncate">
                <%= letter.sender_name.presence || "（匿名）" %>
              </p>
              <p class="mt-1 text-xs px-3 text-stone-500">
                <%= letter.created_at.strftime("%Y/%m/%d %H:%M") %>
              </p>
              <p class="mt-3 text-sm text-stone-700 whitespace-pre-wrap">
                <%= letter.body %>
              </p>
            </div>

            <%= button_to "削除",
                  celebration_letter_path(@celebration, letter),
                  method: :delete,
                  form: { onsubmit: "return confirm('この手紙を削除します。よろしいですか？')" },
                  class: "shrink-0 rounded-xl border border-rose-300 bg-white px-4 py-3 text-xs font-semibold text-rose-600 hover:bg-rose-50" %>
          </div>
        </div>
      <% end %>
    </div>
  <% else %>
    <div class="mt-6 rounded-2xl border border-stone-200 bg-white p-6 text-center text-stone-600">
      まだ手紙は届いていません
    </div>
  <% end %>
</div>

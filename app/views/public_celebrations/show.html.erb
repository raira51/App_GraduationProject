<div class="relative min-h-screen bg-stone-50">
  <div class="relative z-10 mx-auto max-w-4xl px-4 py-4 md:py-8">

    <!-- スマホ用：画像の上に吹き出し -->
    <% if @celebration.short_message.present? %>
      <div class="sm:hidden mb-3 flex justify-left">
        <div class="relative bg-amber-50 border-amber-200 px-4 py-3 rounded-2xl text-sm shadow max-w-[92%] text-center">
          <p class="text-xs text-stone-600 mb-1">
            <%= @celebration.celebration_date %>
          </p>

          <p class="text-xs text-stone-600 mb-1">
            <%= @celebration.giver_name %> から <%= @celebration.receiver_name %> へ
          </p>

          <p class="font-medium text-stone-800">
            <%= @celebration.short_message %>
          </p>

        </div>
      </div>
    <% end %>

    <div class="relative mx-auto w-full max-w-3xl aspect-[1536/1024]">
      <%= image_tag background_image_path_for(@celebration),
            class: "absolute inset-0 h-full w-full object-contain rounded-2xl shadow pointer-events-none select-none" %>

      <!-- PC/タブレット用：画像の上に吹き出し -->
      <% if @celebration.short_message.present? %>
        <div class="hidden sm:block absolute top-[5%] left-1/2 -translate-x-1/2 z-20 text-center">
          <div class="relative bg-white/90 backdrop-blur-sm px-5 py-3 rounded-2xl text-sm shadow">
            <p class="text-xs text-stone-600 mb-1">
              <%= @celebration.celebration_date %>
            </p>

            <p class="text-xs text-stone-600 mb-1">
              <%= @celebration.giver_name %> から <%= @celebration.receiver_name %> へ
            </p>

            <p class="font-medium text-stone-800">
              <%= @celebration.short_message %>
            </p>

            <div class="absolute left-1/2 -translate-x-1/2 bottom-[-8px] w-4 h-4 bg-white/90 rotate-45"></div>
          </div>
        </div>
      <% end %>

      <!-- 花束：クリック領域 -->
      <%= link_to public_celebration_bouquet_path(@celebration.share_url),
            data: { turbo_frame: "modal" },
            class: "absolute z-20 block rounded-xl",
            style: "left:20%; top:25%; width:25%; height:30%;" do %>
        <span class="sr-only">花束を見る</span>
      <% end %>

      <!-- 手紙：クリック領域 -->
      <%= link_to public_celebration_letters_path(@celebration.share_url),
            data: { turbo_frame: "modal" },
            class: "absolute z-20 block rounded-xl",
            style: "left:55%; top:40%; width:32%; height:27%;" do %>
        <span class="sr-only">手紙を読む</span>
      <% end %>

      <!-- 花束ラベル -->
      <div
        class="absolute z-30 pointer-events-none"
        style="left:29%; top:78%; transform: translateX(-50%);">
        <div class="inline-block whitespace-nowrap rounded-full bg-white/85 px-3 py-1 text-xs font-semibold text-stone-700 backdrop-blur shadow">
          花束を見る
        </div>
      </div>

      <!-- 手紙ラベル -->
      <div
        class="absolute z-30 pointer-events-none"
        style="left:71%; top:78%; transform: translateX(-50%);">
        <div class="inline-block whitespace-nowrap rounded-full bg-white/85 px-3 py-1 text-xs font-semibold text-stone-700 backdrop-blur shadow">
          手紙を読む
        </div>
      </div>
    </div>
  </div>

  <div class="mt-10 text-center">
    <p class="text-sm text-stone-500 mb-2">
      このお祝いページの閲覧URL
    </p>

    <div class="inline-flex items-center gap-2 bg-white border border-stone-200 rounded-xl px-4 py-2 shadow-sm">
      <span class="text-xs font-mono text-stone-700 break-all">
        <%= public_celebration_url(@celebration.share_url) %>
      </span>
    </div>
  </div>

  <%= turbo_frame_tag "modal", class: "relative z-50" %>
</div>
